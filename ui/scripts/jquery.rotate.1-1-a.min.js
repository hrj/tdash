jQuery.fn.rotate=function(g,c){var h=function(j,l){var i=Math.cos(l);var m=Math.sin(l);j.style.width=j.width=Math.abs(i*j.oImage.width)+Math.abs(m*j.oImage.height);j.style.height=j.height=Math.abs(i*j.oImage.height)+Math.abs(m*j.oImage.width);var k=j.getContext("2d");k.save();if(l<=Math.PI/2){k.translate(m*j.oImage.height,0)}else{if(l<=Math.PI){k.translate(j.width,-i*j.oImage.height)}else{if(l<=1.5*Math.PI){k.translate(-i*j.oImage.width,j.height)}else{k.translate(0,-m*j.oImage.width)}}}k.rotate(l);k.drawImage(j.oImage,0,0,j.oImage.width,j.oImage.height);k.restore()};var f=this.get(0);if(!c){f.angle=((f.angle==undefined?0:f.angle)+g)%360}else{f.angle=g}if(f.angle>=0){var d=Math.PI*f.angle/180}else{var d=Math.PI*(360+f.angle)/180}if(document.all&&!window.opera){var b=document.createElement("img");var a=Math.cos(d);var e=Math.sin(d);b.src=f.src;b.height=f.height;b.width=f.width;b.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+a+",M12="+(-e)+",M21="+e+",M22="+a+",SizingMethod='auto expand')"}else{var b=document.createElement("canvas");if(!f.oImage){b.oImage=new Image();b.oImage.src=f.src;b.oImage.onload=function(){h(b,d)}}else{b.oImage=f.oImage;h(b,d)}}b.id=f.id;b.angle=f.angle;f.parentNode.replaceChild(b,f)};jQuery.fn.rotateRight=function(a){this.rotate(a==undefined?90:a)};jQuery.fn.rotateLeft=function(a){this.rotate(a==undefined?-90:-a)};